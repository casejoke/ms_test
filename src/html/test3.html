<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
    <title>какая партия тебе подходит?</title>
    <link rel="stylesheet" type="text/css" href="assets/css/duma.css">
</head>

<body class="fix-b-bg">
    <!-- data-background="assets/images/test/back-test.jpg" -->
    <section class="module ">
        <div class="container">
            <div class="row">
                <div class="col-xs-12 col-sm-12  col-md-12  col-lg-12  module__border ">
                    <div class="row">
                        <div class="col-xs-4 col-sm-1 col-md-1 col-lg-1">
                            <a href="/index.html"><img src="assets/images/logo.png" alt="Дума 2016" class="module__logo"></a>
                        </div>
                        <div class=" col-xs-6 col-sm-5 col-sm-offset-4 col-md-5 col-md-offset-5 col-lg-4 col-lg-offset-6">
                            <span class="module__top_text open-sans-exboltit">567 340 <span>горят сердцами</span>
                            </span>
                        </div>
                        <div class="col-xs-2 col-sm-2 col-md-1 col-lg-1">
                            <div class="module__burger" id="my-button">
                                <a href="#"><img src="assets/images/burger_1.png" alt=""></a>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12  center-block">
                            <div class="module__title-test open-sans-exboltit fix-bg-text">
                                Кто достоин большего?
                            </div>
                        </div>
                        <div class="col-xs-12  center-block text-center ">
                            <span class="module__title-testsubtext open-sans-lite ">Они предстали перед народом. <br>
                                                                Оцени, что было сделано за долгие годы! <br>
                                                                Выбор за тобой!</span>
                        </div>
                    </div>
                    <div class="row custom-pd pt-20 hidden-xs hidden-sm">
                        <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3 ">
                            <div class="module__part ">
                                <h4 class="module__part-title open-sans-lite  ">единая россия</h4> <img class="module__part__logo" src="assets/images/logopart/edin_ros.png" alt="">
                                <div class="row module__part-box module-connect custom_row-part" id="part1">
                                </div>
                            </div>
                        </div>
                        <div class=" col-xs-12 col-sm-6 col-md-3 col-lg-3">
                            <div class="module__part ">
                                <h4 class="module__part-title open-sans-lite ">лдпр</h4> <img class="module__part__logo" src="assets/images/logopart/ldpr.png" alt="">
                                <div class="row module__part-box module-connect custom_row-part" id="part2">
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
                            <div class="module__part ">
                                <h4 class="module__part-title open-sans-lite ">кпрф</h4> <img class="module__part__logo" src="assets/images/logopart/kprf.png" alt="">
                                <div class="row module__part-box module-connect custom_row-part" id="part3">
                                </div>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
                            <div class="module__part ">
                                <h4 class="module__part-title open-sans-lite ">справедливая россия</h4> <img class="module__part__logo" src="assets/images/logopart/sprav_ros.png" alt="">
                                <div class="row module__part-box module-connect custom_row-part" id="part4">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row custom-pd module-connect" id="sobit-box">
                        <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3  " id="sob_1">
                            <div class="module__card"> <img class="module__card__img" src="assets/images/test3/card.jpg" alt="card img">
                                <p class="module__card__text open-sans-lite">Реставрация парков</p>
                            </div>
                        </div>
                        <div class=" col-xs-12 col-sm-6 col-md-3 col-lg-3 " id="sob_2">
                            <div class="module__card"> <img class="module__card__img" src="assets/images/test3/card2.jpg" alt="card img">
                                <p class="module__card__text open-sans-lite">Снос исторических зданий и памятников архитектуры</p>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3" id="sob_3">
                            <div class="module__card"> <img class="module__card__img" src="assets/images/test3/card3.jpg" alt="card img">
                                <p class="module__card__text open-sans-lite">Снос торговых павильонов</p>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3" id="sob_4">
                            <div class="module__card"> <img class="module__card__img" src="assets/images/test3/card4.jpg" alt="card img">
                                <p class="module__card__text open-sans-lite">Строительство пешеходных зон</p>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3" id="sob_5">
                            <div class="module__card"> <img class="module__card__img" src="assets/images/test3/card.jpg" alt="card img">
                                <p class="module__card__text open-sans-lite">Платные парковки</p>
                            </div>
                        </div>
                        <div class="col-xs-12  col-sm-6 col-md-3 col-lg-3" id="sob_6">
                            <div class="module__card"> <img class="module__card__img" src="assets/images/test3/card2.jpg" alt="card img">
                                <p class="module__card__text open-sans-lite">Объединение вузов</p>
                            </div>
                        </div>
                        <div class="col-xs-12  col-sm-6 col-md-3 col-lg-3" id="sob_7">
                            <div class="module__card"> <img class="module__card__img" src="assets/images/test3/card3.jpg" alt="card img">
                                <p class="module__card__text open-sans-lite">Строительство новых станций метро </p>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3" id="sob_8">
                            <div class="module__card"> <img class="module__card__img" src="assets/images/test3/card4.jpg" alt="card img">
                                <p class="module__card__text open-sans-lite">Налог на капитальный ремонт </p>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3" id="sob_9">
                            <div class="module__card"> <img class="module__card__img" src="assets/images/test3/card.jpg" alt="card img">
                                <p class="module__card__text open-sans-lite">Реформа здравоохранения</p>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3" id="sob_10">
                            <div class="module__card"> <img class="module__card__img" src="assets/images/test3/card2.jpg" alt="card img">
                                <p class="module__card__text open-sans-lite">Постройка и ремонт общественных туалетов</p>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3" id="sob_11">
                            <div class="module__card"> <img class="module__card__img" src="assets/images/test3/card3.jpg" alt="card img">
                                <p class="module__card__text open-sans-lite">Удорожание госпошлин за заключение и расторжение брака</p>
                            </div>
                        </div>
                        <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3" id="sob_12">
                            <div class="module__card"> <img class="module__card__img" src="assets/images/test3/card4.jpg" alt="card img">
                                <p class="module__card__text open-sans-lite">
                                    Выделенные полосы для общественного транспорта</p>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12  center-block text-center">
                            <a id="solution" href="#" class="btn_solution open-sans-exbolt hidden">Принять решение</a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-12 col-sm-5 col-sm-offset-7 col-md-4 col-md-offset-8 col-lg-3 col-lg-offset-9 ">
                            <div class="warning-duma  mt-130 ">
                                <!-- /*mt-130 убрать если нет таймера*/ -->
                                <div class="icon-hand ml-12"></div><span class="warning-duma__text open-sans-lite text-center">информбюро думы <br>предупреждает!</span>
                            </div>
                        </div>
                    </div>
                    <div class="menu " id="left-menu">
                        <div class="menu__burger-close" id="btn_close"><img src="assets/images/burger_2.png" alt=""></div>
                        <ul class="menu__nav">
                            <li class="menu__nav-title open-sans-lite"><a href="/index.html">Главная</a></li>
                            <li class="menu__nav-step  open-sans-regular">I Этап</li>
                            <li class="menu__nav-title open-sans-lite"><a href="/test1.html">3наток думы</a></li>
                            <li class="menu__nav-title open-sans-lite"><a href="/test2.html">Кресло депутата</a></li>
                            <li class="menu__nav-title open-sans-lite"><a href="/test3.html">Рейтинг партий</a></li>
                            <li class="menu__nav-heros open-sans-lite"><a href="/index.html#heros">Герои</a></li>
                            <li class="menu__nav-step  menu__nav-stepfix open-sans-regular">II Этап</li>
                            <li class="menu__nav-title menu__nav-titlefix open-sans-lite">подпишись чтобы выжить</li>
                            <li class="input-group menu__nav-input">
                                <input type="text" class="form-control">
                                <div class="input-group-addon"><a href="#"><i class="fa fa-paper-plane-o"></i></a></div>
                            </li>
                        </ul>
                    </div>
                    <div class="hover_scr_on_mob hidden" id="help_scr">
                        <p class="hover_scr_on_mob__text open-sans-lite">Нажмите на событие и выбери к какой партии его отнести
                            <br> для продолжения нажми далее
                        </p>
                        <a href="#" id="btn_next" class="btn_on_help_scr open-sans-exbolt">далее</a>
                    </div>
                    <div class="hover_scr_on_mob-left " id="part_scr">
                        <p class="hover_scr_on_mob__text open-sans-lite">выбери одну из партий
                        </p>
                        <div class="hover_scr_on_mob-left__partia open-sans-exbolt" id="part_ed_rs">
                            единая россия
                        </div>
                        <div class="hover_scr_on_mob-left__partia open-sans-exbolt" id="part_ldpr">
                            лдпр
                        </div>
                        <div class="hover_scr_on_mob-left__partia open-sans-exbolt" id="part_kprf">
                            кпрф
                        </div>
                        <div class="hover_scr_on_mob-left__partia open-sans-exbolt" id="part_sp_rs">
                            справедливая россия
                        </div>
                        <a href="#" id="btn_next-part" class="btn_on_help_scr open-sans-exbolt">назад</a>
                      
                    </div>
                      
                        <div class="hover_scr_on_mob-left " id="part_scr_solutio">
                        <a href="#" id="solut_mob" class="btn_on_help_scr open-sans-exbolt " >принять решение</a>
                        <a href="#" id="btn_back_solution" class="btn_on_help_scr open-sans-exbolt">назад</a>
                        </div>


                </div>
            </div>
        </div>
    </section>
    <script src="assets/js/duma.js"></script>
    <script>
    $(function() {
        var edin_ros = $('#part1');
        var ldpr = $('#part2');
        var kprf = $('#part3');
        var sprav_ros = $('#part4');
        var boxid = $('#sobit-box');
        var allsob = $('#sobit-box div ');
        var connectClass = '.module-connect';
        var addClassInPart = 'module__card-inpart';
        var btnsol = $('#solution');


        boxid.sortable({
            connectWith: connectClass,
            receive: function(event, ui) {
                remClassToElInBox();
            }
        });

        edin_ros.sortable({
            connectWith: connectClass,
            receive: function(event, ui) {
                addClassToElInBox(this);
            }
        });
        ldpr.sortable({
            connectWith: connectClass,
            receive: function(event, ui) {
                addClassToElInBox(this);
            }
        });
        kprf.sortable({
            connectWith: connectClass,
            receive: function(event, ui) {
                addClassToElInBox(this);
            }
        });
        sprav_ros.sortable({
            connectWith: connectClass,
            receive: function(event, ui) {
                addClassToElInBox(this);
            }
        });

        function addClassToElInBox(part) {
            var list = $(part).sortable("toArray");
            for (var i = 0; i < list.length; i++) {
                var id = list[i];
                var el = document.getElementById(id);
                if ($(el).hasClass(addClassInPart) == false) {
                    $(el).addClass(addClassInPart);
                }
            };
            showbtn();
        }

        function remClassToElInBox() {
            var list = boxid.sortable("toArray");
            for (var i = 0; i < list.length; i++) {
                var id = list[i];
                var el = document.getElementById(id);
                if ($(el).hasClass(addClassInPart) == true) {
                    $(el).removeClass(addClassInPart);
                }
            };
        }

        function showbtn() {
            var list = boxid.sortable("toArray");
            if (list.length == 0) {
                btnsol.removeClass('hidden');

            }
        }

        /*получить значение id в каждой партии */
        // $('#btn').click(function(){
        //  edin_ros.sortable("toArray"));
        //  
        // });
    });

    $(document).ready(function() {

        if (mobile === true) {
            console.log("mobile detect");
            $('#help_scr').removeClass('hidden');
        }

        $('#btn_next').click(function() {
            $('#help_scr').addClass('hover_scr_on_mob-no');
        });






        $('#btn_next-part').click(function() {
            if (mobile === true) {
                $('#part_scr').removeClass('hover_scr_on_mob-left-on');
            }
        });

        /* mob-ver-js */
        var bnt_edros = $('#part_ed_rs');
        var btn_ldpr = $('#part_ldpr');
        var bnt_kprf = $('#part_kprf');
        var btn_sp_ros = $('#part_sp_rs');
        var bnt_back = $('#btn_next-part');
        var nowid = 'sob_1'; // текуший id 
        bnt_back.click(function() {
            if (mobile === true) {
                $('#part_scr').removeClass('hover_scr_on_mob-left-on');
            }
        });
           $('#btn_back_solution').click(function() {
            if (mobile === true) {
                $('#part_scr_solutio').removeClass('hover_scr_on_mob-left-on');
            }
        });


        $('#sob_1').click(function() { chosesobie('sob_1'); });
        $('#sob_2').click(function() { chosesobie('sob_2'); });
        $('#sob_3').click(function() { chosesobie('sob_3'); });
        $('#sob_4').click(function() { chosesobie('sob_4'); });
        $('#sob_5').click(function() { chosesobie('sob_5'); });
        $('#sob_6').click(function() { chosesobie('sob_6'); });
        $('#sob_7').click(function() { chosesobie('sob_7'); });
        $('#sob_8').click(function() { chosesobie('sob_8'); });
        $('#sob_9').click(function() { chosesobie('sob_9'); });
        $('#sob_10').click(function() { chosesobie('sob_10'); });
        $('#sob_11').click(function() { chosesobie('sob_11'); });
        $('#sob_12').click(function() { chosesobie('sob_12'); });    
         


        bnt_edros.click(function() {
            var name_part = 'единая россия';
            var attr_part = "1"
            addhovertocard(nowid, name_part, attr_part);
            bnt_back.click();
        })
        btn_ldpr.click(function() {
            var name_part = 'лдпр';
            var attr_part = "2"
            addhovertocard(nowid, name_part, attr_part);
            bnt_back.click();
        }) 
        bnt_kprf.click(function() {
            var name_part = 'кпрф';
            var attr_part = "3"
            addhovertocard(nowid, name_part, attr_part);
            bnt_back.click();
        })  
        btn_sp_ros.click(function() {
            var name_part = 'справедливая россия';
            var attr_part = "4"
            addhovertocard(nowid, name_part, attr_part);
            bnt_back.click();
        }) 

        function addhovertocard(idcard, name_part, attr_part) {
            var sob = document.getElementById(idcard);
            $(sob).find('.module__card').append("<div class='choice_part' part=" + attr_part + "><div class='choice_part-name open-sans-exboltit'>" + name_part + "</div><div class='choice_part__bnt_cansel open-sans-exboltit'>отменить</div></div>");
            console.log(endSolution());  
        }

        function removehovercard(idcard) {
            var sob = document.getElementById(idcard);
            $(sob).find('.choice_part').remove();
        }

        function hashoveriinid(idcard) {
            var sob = document.getElementById(idcard);
            if ($(sob).find('.choice_part').hasClass('choice_part') === true) {
                return true;
            } else {
                return false;
            }
        }

        function getattrpart(idcard) {
            var sob = document.getElementById(idcard);
            return $(sob).find('.choice_part').attr("part");
        }

        function chosesobie(idcard) {


           nowid = idcard;
           // var top = $(document.getElementById(nowid)).offset().top;  
           // $('#part_scr').css({"padding-top": top*1.6+"px" });
            if (mobile === true) {
                if (hashoveriinid(nowid) === true) {
                    removehovercard(nowid);
                } else {
                    $('#part_scr').addClass('hover_scr_on_mob-left-on'); 
                    
                }
            }
        }
          

               
          function endSolution(){
           var sobid =['sob_1', 'sob_2','sob_3','sob_4', 'sob_5', 'sob_6','sob_7','sob_8','sob_9','sob_10','sob_11','sob_12'];
           for (var i = 0; i < sobid.length; i++) {
                  if (hashoveriinid(sobid[i]) === false) {
                    return false;
                  }
            }; 
            
            $('#part_scr_solutio').addClass('hover_scr_on_mob-left-on'); 
            return true;
          }
           





         //  $(window).scroll(function() {  

         // var top = $(document.getElementById(nowid)).offset().top;  
         //   $('#part_scr').css({"padding-top": top+"px" });
         //   console.log( top);   
         
         //  });

    });
    </script>
</body>

</html>
